<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bible Courses Library</title>
  <style>
    :root{
      --bg:#0b1220; --card:#121a2b; --muted:#94a3b8; --text:#e5ecff; --accent:#5eead4; --accent-2:#60a5fa;
      --ring:#22d3ee55; --border:#1f2a44; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
   body {
  margin: 0;
  font: 15px/1.55 system-ui,-apple-system,segoe ui,roboto,ubuntu,"noto sans",sans-serif;
  background: radial-gradient(1200px 900px at 20% -10%,#10203a,transparent),linear-gradient(180deg,#0b1220,#0b1220 200px,#0a1120);
  color: var(--text);
  padding-bottom: 60px; /* ఫుటర్ కోసం ఇప్పటికే ఉన్న ప్యాడింగ్ */
  
  /* కొత్తగా జతచేయండి */
  min-height: 100vh; /* కనీసం వ్యూపోర్ట్ ఎత్తు అంతా విస్తరించండి */
  background-attachment: fixed; /* బ్యాక్‌గ్రౌండ్ స్క్రీన్‌కి ఫిక్స్ అయ్యేలా చేయండి */
  background-size: cover; /* బ్యాక్‌గ్రౌండ్ మొత్తం కవర్ అయ్యేలా చేయండి (ఐచ్ఛికం) */
}

    header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,rgba(11,18,32,.95),rgba(11,18,32,.85));backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
    .wrap{max-width:1080px;margin:0 auto;padding:14px 16px}
    h1{font-size:clamp(20px,2.2vw,28px);margin:0 0 6px;font-weight:700;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:12.5px;margin-bottom:8px}

    /* --- COMPACT ONE-LINE TOOLBAR --- */
    .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .search{position:relative;flex:1 1 340px;min-width:220px}
    .search input{width:100%;padding:10px 36px 10px 12px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--text);outline:none;box-shadow:var(--shadow)}
    .search input:focus{border-color:var(--accent-2);box-shadow:0 0 0 4px var(--ring)}
    .search .clear{position:absolute;right:6px;top:50%;transform:translateY(-50%);background:transparent;border:0;color:var(--muted);cursor:pointer;font-size:16px}

    .iconbar {
  display: flex;
  gap: 40px; /* ఐకాన్ గ్రూపుల మధ్య అంతరం తగ్గించబడింది */
  align-items: flex-start; /* లేదా 'center' అవసరాన్ని బట్టి */
  justify-content: space-around; /* ఐకాన్ గ్రూపుల మధ్య సమాన అంతరం */
  flex-wrap: wrap; /* స్క్రీన్ చిన్నగా ఉన్నప్పుడు లైన్ మారడానికి */
  width :100%;
}
    
    .icon-btn, .toggle{display:inline-flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;box-shadow:var(--shadow)}
    .icon-btn:focus, .toggle:focus, select:focus{outline:none;border-color:var(--accent-2);box-shadow:0 0 0 4px var(--ring)}
    .toggle.active{border-color:#fbbf24;color:#fbbf24}

    /* Slim selects revealed from icon buttons */
    .popover{position:relative}
    .popover-content{position:absolute;top:44px;right:0;min-width:200px;background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:8px;display:none}
    .popover.open .popover-content{display:block}
    .popover select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--bg);color:var(--text)}

    .stats{display:flex;gap:12px;align-items:center;color:var(--muted);font-size:13px;margin-top:10px}

    .grid{
    max-width:1080px;margin:16px auto;padding:0 16px;display:grid;gap:20px;
    }

    details.course, details.sem{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
    details > summary{list-style:none;cursor:pointer;user-select:none;padding:12px 14px;border-radius:16px;display:flex;justify-content:space-between;align-items:center}
    details > summary::-webkit-details-marker{display:none}
    .title{font-weight:700}
    .muted{color:var(--muted);font-size:12px}
    .chev{transition:.2s transform}
    details[open] > summary .chev{transform:rotate(90deg)}

    .lessons{display:grid;gap:10px;padding:0 14px 14px}
    .lesson{display:flex;justify-content:space-between;gap:10px;align-items:center;background:#0f1729;border:1px solid var(--border);padding:10px 12px;border-radius:12px}
    .lesson a{color:var(--text);text-decoration:none;font-weight:600}
    .lesson a:hover{text-decoration:underline}
    .lesson .right{display:flex;gap:8px;align-items:center}
    .pill{font-size:11px;color:#0b1220;background:var(--accent);padding:3px 8px;border-radius:999px;font-weight:700}
    .open-btn, .fav-btn{border:1px solid var(--border);background:transparent;border-radius:10px;padding:6px 10px;color:var(--text);cursor:pointer}
    .fav-btn.active{border-color:#fbbf24;color:#fbbf24}

    footer{color:var(--muted);font-size:12px;padding:16px 16px;text-align:center;
    position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: var(--bg); /* బ్యాక్‌గ్రౌండ్ కలర్ సెట్ చేయండి */
  box-shadow: 0 -2px 10px rgba(0,0,0,.1); /* కావాలంటే షాడో జతచేయండి */
  z-index: 10;
    }

    /* Small screens: keep everything in one tight row */
    @media (max-width:420px){
      .icon-btn, .toggle{width:34px;height:34px}
      .popover-content{right:auto;left:0}
    }
    h1 {
        text-align:center;
        font-size:30px;
        color:#9da100;
    }
    lables {
        
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>BIBLE COURSES - BOUI</h1>
      

      <div class="toolbar">
        <div class="search">
          <input id="q" type="search" placeholder="పాఠాన్ని సెర్చ్ చేయండి" autocomplete="off" />
          <button class="clear" title="Clear" id="clearBtn">✕</button>
        </div>

        <div class="iconbar">
          <!-- Course filter popover -->
          <div class="popover" id="coursePopover">
            <button class="icon-btn" id="courseBtn" title="Courses">
              <!-- book icon -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4 19a3 3 0 0 0 3 3h13v-2H7a1 1 0 1 1 0-2h13V4a2 2 0 0 0-2-2H7a3 3 0 0 0-3 3v14z"/></svg>
            </button>
            <div class="popover-content">
              <label class="muted" for="courseSel">All Courses</label>
              <select id="courseSel"><option value="">All Courses</option></select>
            </div>
          </div>

          <!-- Semester filter popover -->
          <div class="popover" id="semPopover">
            <button class="icon-btn" id="semesterBtn" title="Semesters">
              <!-- layers icon -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2 1 7l11 5 11-5-11-5zm0 9L1 6v3l11 5 11-5V6l-11 5zm0 5L1 11v3l11 5 11-5v-3l-11 5z"/></svg>
            </button>
            <div class="popover-content">
              <label class="muted" for="semesterSel">All Semesters</label>
              <select id="semesterSel"><option value="">All Semesters</option></select>
            </div>
          </div>

          <!-- Expand all -->
          <button class="icon-btn" id="expandAll" title="Expand all">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 7h18v2H3zM3 11h12v2H3zM3 15h8v2H3z"/></svg>
          </button>
          <!-- Collapse all -->
          <button class="icon-btn" id="collapseAll" title="Collapse all">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 7h8v2H3zM3 11h12v2H3zM3 15h18v2H3z"/></svg>
          </button>
          <!-- Favorites toggle (filter) -->
          <button class="toggle" id="favToggle" title="ఫేవరిట్స్ మాత్రమే">★</button>
        </div>
      </div>

      <div class="stats">
        <div id="count">0 పాఠాలు</div>
        
       
      </div>
    </div>
  </header>

  <main class="grid" id="grid"></main>
  

  <footer>© Bible Open Universus India, International</footer>


<script>
// =============== 1) CONFIG ===============
// If your lesson links are relative, we prefix them with SITE_BASE (leave "" when hosting at the repo root)
const SITE_BASE = ""; // e.g., "https://username.github.io/repo/" or ""

// Helper to generate lessons 01..n with a base path ("dbth/s1/lesson")
const pad2 = n => n.toString().padStart(2, '0');
const gen = (n, base) => Array.from({length:n}, (_,i)=>({ title:`పాఠం ${pad2(i+1)}`, url:`${base}${pad2(i+1)}.html` }));

// Build DATA programmatically. Adjust prefixes to match your folders.
const DATA = {
  "D.B.Th": {
    "Semester 1": [
      { "title": "1.బైబిల్ అనగానేమి? దానిని ఎలా చదవాలి?", "url": "https://htmlpreview.github.io/?https://github.com/Rajatalluri91/BOUI-LESSONS/blob/main/01.%20బైబిల్%20అనగానేమి%20దానిని%20ఎలా%20చదవాలి%20(D1).html" },
            
      { "title": "2.దేవుడెవరు?", "url": "https://rajatalluri91.github.io/BOUI-LESSONS/02.%20దేవుడెవరు%20(D1).html" },
      { "title": "3.మనుష్యులు తండ్రియైన దేవునిని చూడగలరా?", "url": "https://rajatalluri91.github.io/BOUI-LESSONS/03.%20మనుష్యులు%20తండ్రియైన%20దేవునిని%20చూడగలరా(D1).html" },
      { "title": "4.ఎవరు నీ శత్రువు?", "url": "https://rajatalluri91.github.io/BOUI-LESSONS/04.%20ఎవరు%20నీ%20శత్రువు?(D1)" },
      { "title": "5.భవిష్యత్ ఎరిగిన దేవుడు మంచి చెడులు తెలివినిచ్చు వృక్షమును ఏదెను తోటలో ఎందుకు వేసాడు?", "url": "dbth/s1/lesson05.html" },
      { "title": "6.కయీనుకి భార్య ఎక్కడి నుండి వచ్చింది?", "url": "dbth/s1/lesson06.html" },
      { "title": "7.మానవ జన్మదినము రహస్యమా?", "url": "dbth/s1/lesson07.html" },
      { "title": "8.దేవదూతలు దేవుని కుమారులా? సేవకులైన ఆత్మలా?", "url": "dbth/s1/lesson08.html" },
      { "title": "9.హేబెలుమొదలుకొని మరణించినవారంతా పరలోకం వెళ్ళియున్నారా?", "url": "dbth/s1/lesson09.html" },
      { "title": "10.మోషే శరీరం గూర్చిన తర్కము", "url": "dbth/s1/lesson10.html" },
      { "title": "11.విశ్వాసం అనగా నేమి? దానిని ఎలా పరీక్షించుకోవాలి?", "url": "dbth/s1/lesson11.html" },
      { "title": "12.బాప్తిస్మము అనగానేమి? దానిని ఎలా, ఎప్పుడు, ఎందుకు తీసుకొనవలెను? చిన్నపిల్లలకు బాప్తిస్మం ఇవ్వవచ్చునా?", "url": "dbth/s1/lesson12.html" },
      { "title": "13.సువార్త అనగానేమి? దానిని ఎలా ప్రకటించాలి? ఎందుకు ప్రకటించాలి?", "url": "dbth/s1/lesson13.html" },
      { "title": "14.ఉద్యోగస్తులు దేవుని సేవ చేయవచ్చునా?", "url": "dbth/s1/lesson14.html" },
      { "title": "15.అలంకరణ దేవుని రాజ్యానికి ఆటంకమా?", "url": "dbth/s1/lesson15.html" },
      { "title": "16.నిత్యజీవానికి బలి అవసరమా ?", "url": "dbth/s1/lesson16.html" },
      { "title": "17.చెడు కనిపిస్తే చట్టానికి నేరం, దాన్ని తలిస్తే దేవునికి దూరం!", "url": "dbth/s1/lesson17.html" },
      { "title": "18.బూడిదయ్యే భూమితో-అంతరిక్షం అంతరిస్తుందా?", "url": "dbth/s1/lesson18.html" },
      { "title": "19.యేసు మూడు రాత్రింబగళ్ళు సమాధిలో ఉన్నాడా?", "url": "dbth/s1/lesson19.html" },
      { "title": "20.ఎవరీ జయశాలి?", "url": "dbth/s1/lesson20.html" },
      { "title": "21.బైబిల్ పుట్టుక రహస్యం", "url": "dbth/s1/lesson21.html" },
      { "title": "22.దేవునిని నిరూపించేది నరుడే", "url": "dbth/s1/lesson22.html" },
      { "title": "23.బ్రతకునిచ్చిన దేవుడు బ్రతకటం నేర్పించలేదా?", "url": "dbth/s1/lesson23.html" },
      { "title": "24.తల్లితండ్రుల పెంపకలోపం నెరవేరని దేవుని సంకల్పం", "url": "dbth/s1/lesson24.html" },
      { "title": "25.పాపపుణ్యాల ఫలితం జీవితకాలమా? అనంతకాలమా?", "url": "dbth/s1/lesson25.html" },
      { "title": "26.ఫలమిచ్చు చెట్టువా? నరకబడిన మొద్దువా?", "url": "dbth/s1/lesson26.html" }
    ],
    
    
  "Semester 2": [
    { "title": "1.బైబిల్ నిజమైన దైవగ్రంథమా?", "url": "dbth/s2/lesson01.html" },
    { "title": "2.పరలోకం, నరకం నిజంగా ఉన్నాయా?", "url": "dbth/s2/lesson02.html" },
    { "title": "3.మూడులోకాల మర్మాలు", "url": "dbth/s2/lesson03.html" },
    { "title": "4.ధర్మశాస్త్రము అవసరత - దాని విడుదల", "url": "dbth/s2/lesson04.html" },
    { "title": "5.సకల శాస్త్రాలను అధిగమించిన బైబిల్", "url": "dbth/s2/lesson05.html" },
    { "title": "6.ఆశీర్వాదం నాడు-నేడు", "url": "dbth/s2/lesson06.html" },
    { "title": "7.ఈ కాలంలో దేవుడు సేవకులను తన సేవ కొరకు పిలుచునా?", "url": "dbth/s2/lesson07.html" },
    { "title": "8.కన్న తండ్రి మనసెరిగిన పిల్లలున్నారా?", "url": "dbth/s2/lesson08.html" },
    { "title": "9.దేవుని ఇంట కూర్చున్న దయ్యం", "url": "dbth/s2/lesson09.html" },
    { "title": "10.బ్రతికి చస్తావా? చచ్చి బ్రతుకుతావా?", "url": "dbth/s2/lesson10.html" },
    { "title": "11.మరణించినవారు ప్రేతాత్మలై తిరిగిభూమి మీదకు రాగలరా?", "url": "dbth/s2/lesson11.html" },
    { "title": "12.దేవుడు నీకిచ్చిన పని చేయుచున్నావా?", "url": "dbth/s2/lesson12.html" },
    { "title": "13.పరిశుద్ధాత్ముడు ఎవరు?", "url": "dbth/s2/lesson13.html" },
    { "title": "14.మనుష్యుల్లో దేవుని ఇష్టం నెరవేరుతుందా?", "url": "dbth/s2/lesson14.html" },
    { "title": "15.బీదలెవరు? సహాయం ఎవరికి చేయాలి?", "url": "dbth/s2/lesson15.html" },
    { "title": "16.భూమి మీద మనుష్యుల ప్రాణములను అడుగుతున్న మరో లోకపువారెవరు?", "url": "dbth/s2/lesson16.html" },
    { "title": "17.క్రీస్తుకే బోధకుడైన శోధకుడు!", "url": "dbth/s2/lesson17.html" },
    { "title": "18.క్రైస్తవులు విగ్రహములకు బలిగా అర్పించిన వాటిని తినవచ్చునా?", "url": "dbth/s2/lesson18.html" },
    { "title": "19.సమసమాజ స్థాపనకు కావల్సింది చట్టమా? తుపాకీ గొట్టమా?", "url": "dbth/s2/lesson19.html" },
    { "title": "20.వివాహం ఎందుకు ఘనమైనది?", "url": "dbth/s2/lesson20.html" },
    { "title": "21.ప్రభువునందు ప్రయాసకు ఫలితమేమి?", "url": "dbth/s2/lesson21.html" },
    { "title": "22.మానవ పతనానికి హేతువైన అబద్ధం", "url": "dbth/s2/lesson22.html" },
      { "title": "23.రొట్టె ద్రాక్షారసము తీసుకొనకుంటే నరకమేనా?", "url": "dbth/s2/lesson23.html" },
      { "title": "24.ఇంటిపేరు ఉన్నదా? పేరు మారిందా?", "url": "dbth/s2/lesson24.html" },
      { "title": "25.అంతరించని అందం ఉన్నదా?", "url": "dbth/s2/lesson25.html" },
      { "title": "26.పేదరికం దేవుని శాపమా?", "url": "dbth/s2/lesson26.html" },
      { "title": "27.అబ్బాయైతే కడుపు మోయాలా? అమ్మాయైతే కడుపు కొయ్యాలా?", "url": "dbth/s2/lesson27.html" }
    ]
  },

  "B.B.Th": {
    "Semester 1": [
      { "title": "1. విశ్వ ఆవిర్భావం", "url": "bbth/s1/lesson01.html" },
      { "title": "2. మహాజ్ఞానం తూర్పు దేశాలలో ఉందా?", "url": "bbth/s1/lesson02.html" },
      { "title": "3. క్రైస్తవ్యం మతమా? మార్గమా?", "url": "bbth/s1/lesson03.html" },
      { "title": "4. ఎవరు ఇశ్రాయేలీయులు? ఎవరు క్రైస్తవులు?", "url": "bbth/s1/lesson04.html" },
      { "title": "5. దేవుని నివాసము మనుష్యులలో ఉన్నదా?", "url": "bbth/s1/lesson05.html" },
      { "title": "6. దేవుని కుమారులు నరుల కుమార్తెలను వివాహమాడిరా?", "url": "bbth/s1/lesson06.html" },
      { "title": "7. దేవుని లెక్కలతో నీ లెక్క సరిపోయినదా?", "url": "bbth/s1/lesson07.html" },
      { "title": "8. దేవుని ఆకలి తీర్చేదెవరు?", "url": "bbth/s1/lesson08.html" },
      { "title": "9. దేవుని పనికిరాని నీవు ప్రార్ధించుట న్యాయమా?", "url": "bbth/s1/lesson09.html" },
      { "title": "10. నీవు పుట్టియుండని యెడల మేలా?", "url": "bbth/s1/lesson10.html" },
      { "title": "11. మూలపాఠాల మనిషికి దేవుని పాఠాలు", "url": "bbth/s1/lesson11.html" },
      { "title": "12. ప్రార్ధన ఎవరికి చేయాలి? తండ్రికా? క్రీస్తుకా? పరిశుద్ధాత్మకా?", "url": "bbth/s1/lesson12.html" },
      { "title": "13. ఉపవాసం అనగానేమి? సంపూర్ణరాత్రి ఉపవాస కూడికలు వాక్యానుసారమా?", "url": "bbth/s1/lesson13.html" },
      { "title": "14. ఎవరు ఎవరి కొరకు ఆలోచించుచున్నారు?", "url": "bbth/s1/lesson14.html" },
      { "title": "15. ఏది సొంత ఊరు? ఎవరు సొంతవారు?", "url": "bbth/s1/lesson15.html" },
      { "title": "16. బ్రతికున్నవారు చనిపోయినవారి కొరకు సంతాపసభలు పెట్టి ప్రార్ధించవచ్చా?", "url": "bbth/s1/lesson16.html" },
      { "title": "17. హెవెన్లీ సేఫ్టీ లాకర్", "url": "bbth/s1/lesson17.html" },
      { "title": "18. క్రీస్తు సాక్ష్యాన్ని గల్లంతు చేస్తున్న నేటి క్రైస్తవుల సాక్ష్యాలు", "url": "bbth/s1/lesson18.html" },
      { "title": "19. నేటి కాలుష్యానికి బైబిల్ చెప్పిన భాష్యం", "url": "bbth/s1/lesson19.html" },
      { "title": "20. ఎయిడ్స్ సృష్టి అమెరికాదా? నరునిదా?", "url": "bbth/s1/lesson20.html" },
      { "title": "21. బైబిల్లో లో నరబలి ఉన్నదా?", "url": "bbth/s1/lesson21.html" },
      { "title": "22. క్రీడలు మానసికా వికాసానికా? మానవ పతనానికా?", "url": "bbth/s1/lesson22.html" },
      { "title": "23. దేవుని పరదైసు", "url": "bbth/s1/lesson23.html" },
      { "title": "24. నపుంసకత్వం సృష్టిలోపమా? దేవుని శాపమా?", "url": "bbth/s1/lesson24.html" },
      { "title": "25. మందిరానికి చేరుకుంటావా? పాతాళానికి జారుకుంటావా?", "url": "bbth/s1/lesson25.html" },
      { "title": "26. మేలుకీడుల రథసారధి దేవుడా?", "url": "bbth/s1/lesson26.html" },
      { "title": "27. సూచకక్రియ అనగానేమి? ఇవి నేటికాలంలో జరుగుచున్నవా?", "url": "bbth/s1/lesson27.html" }
    ],

    "Semester 2": [ 
      { "id": 1, "title": "దేవుని స్వరూపము", "url": "bbth/s2/lesson01.html" },
      { "id": 2, "title": "దర్శన దేవుడు నిజమా?", "url": "bbth/s2/lesson02.html" },
      { "id": 3, "title": "దేవుని మర్మము", "url": "bbth/s2/lesson03.html" },
      { "id": 4, "title": "దయ్యం పుట్టుక", "url": "bbth/s2/lesson04.html" },
      { "id": 5, "title": "ప్రపంచ వింత నరుడా? నరుని నిర్మాణాలా?", "url": "bbth/s2/lesson05.html" },
      { "id": 6, "title": "ఆది మానవుని జన్మస్థలం ఆసియా?", "url": "bbth/s2/lesson06.html" },
      { "id": 7, "title": "జన్మలున్నవా? జన్మతరువాత మరో జన్మ రహస్యమా?", "url": "bbth/s2/lesson07.html" },
      { "id": 8, "title": "పసిపిల్లలకు జన్మపాపమున్నదా?", "url": "bbth/s2/lesson08.html" },
      { "id": 9, "title": "క్రైస్తవులకు కుటుంబ నియంత్రణ అవసరమా?", "url": "bbth/s2/lesson09.html" },
      { "id": 10, "title": "దేవుని జ్ఞాపకాలలో నీవున్నావా?", "url": "bbth/s2/lesson10.html" },
      { "id": 11, "title": "కట్టెతో కైలాసమా? కట్టెతో నరకమా?", "url": "bbth/s2/lesson11.html" },
      { "id": 12, "title": "దేవుని సేవలో మరణం వరమా? శాపమా?", "url": "bbth/s2/lesson12.html" },
      { "id": 13, "title": "శవాలకు జీవం పోయగలనన్న సైన్స్- అది నీకెన్నటికి చేతకాదన్న బైబిల్!", "url": "bbth/s2/lesson13.html" },
      { "id": 14, "title": "మనిషి చేసిన తప్పు - ప్రకృతి వలన ముప్పు", "url": "bbth/s2/lesson14.html" },
      { "id": 15, "title": "ప్రేయర్ టవర్స్ అవసరత ఉన్నదా?", "url": "bbth/s2/lesson15.html" },
      { "id": 16, "title": "బాప్తీస్మము పరలోక మార్గమా?", "url": "bbth/s2/lesson16.html" },
      { "id": 17, "title": "ఇశ్రాయేలీయుల పండుగలు క్రైస్తవులకా?", "url": "bbth/s2/lesson17.html" },
      { "id": 18, "title": "ఉభయార్ధసాధక ఉపకారిణి క్రైస్తవుల అదృశ్య వినాశిని అపవాది.", "url": "bbth/s2/lesson18.html" },
      { "id": 19, "title": "ఆత్మకుమ్మరింపులు", "url": "bbth/s2/lesson19.html" },
      { "id": 20, "title": "బైబిల్ను దొంగిలించిన సైన్స్ ప్రపంచం", "url": "bbth/s2/lesson20.html" },
      { "id": 21, "title": "పక్షిరాజు నేర్పుతున్న యౌవన గుణపాఠం", "url": "bbth/s2/lesson21.html" },
      { "id": 22, "title": "చరిత్రకు తెలియని గతం- బైబిల్ చెప్పిన నిజం", "url": "bbth/s2/lesson22.html" },
      { "id": 23, "title": "కైసరువి కైసరుకి - దేవునివి దేవునికి", "url": "bbth/s2/lesson23.html" },
      { "id": 24, "title": "పాతరోగాలు పోకముందే క్రొత్తరోగాలా?", "url": "bbth/s2/lesson24.html" },
      { "id": 25, "title": "దేవుని నిఘావ్యవస్థ", "url": "bbth/s2/lesson25.html" },
      { "id": 26, "title": "క్రైస్తవులు రక్తాపరాధులా?", "url": "bbth/s2/lesson26.html" },
      { "id": 27, "title": "సర్వేంద్రియానం నయనం ప్రధానమా? ప్రమాదమా?", "url": "bbth/s2/lesson27.html" }
    ],

    "Semester 3": [
      { "id": 1, "title": "మహత్తుగల మాట", "url": "bbth/s3/lesson01.html" },
      { "id": 2, "title": "వాక్యము బంధింపబడుతుందా?", "url": "bbth/s3/lesson02.html" },
      { "id": 3, "title": "ఆకర్షణ", "url": "bbth/s3/lesson03.html" },
      { "id": 4, "title": "లోకనీతి దేవుని నీతికి సమానమా?", "url": "bbth/s3/lesson04.html" },
      { "id": 5, "title": "మానవ నేత్రాలకు కనిపించని మహాగని", "url": "bbth/s3/lesson05.html" },
      { "id": 6, "title": "ఈ లోకానికి దిక్కెవరు?", "url": "bbth/s3/lesson06.html" },
      { "id": 7, "title": "వ్రాయబడినవారు ఎవరు?", "url": "bbth/s3/lesson07.html" },
      { "id": 8, "title": "రాజ్యసువార్త ప్రకృతికా? ప్రజలకా?", "url": "bbth/s3/lesson08.html" },
      { "id": 9, "title": "చెరను చెరగా పట్టుకొని పోవుట అనగానేమి?", "url": "bbth/s3/lesson09.html" },
      { "id": 10, "title": "ఇశ్రాయేలీయుల పరిరక్షణ అమెరికాకు మెప్పా? నేటి భూమండలానికే పెను ముప్పా?", "url": "bbth/s3/lesson10.html" },
      { "id": 11, "title": "పదార్ధానికి జ్ఞాపకశక్తి ఉందా?", "url": "bbth/s3/lesson11.html" },
      { "id": 12, "title": "ప్రకృతికి సంభవించే పెనుప్రమాదాలను జంతుజాలము ముందుగా గుర్తించగలదా?", "url": "bbth/s3/lesson12.html" },
      { "id": 13, "title": "శాస్త్రానికందని తుఫాన్", "url": "bbth/s3/lesson13.html" },
      { "id": 14, "title": "క్రిస్మస్", "url": "bbth/s3/lesson14.html" },
      { "id": 15, "title": "క్రీస్తును కన్నందుకు కన్నీరేనా?", "url": "bbth/s3/lesson15.html" },
      { "id": 16, "title": "ఏడేండ్ల శ్రమలు", "url": "bbth/s3/lesson16.html" },
      { "id": 17, "title": "ఆత్మచావదు - అగ్నిఆరదు", "url": "bbth/s3/lesson17.html" },
      { "id": 18, "title": "పాతాళము", "url": "bbth/s3/lesson18.html" },
      { "id": 19, "title": "జ్యోతిష్యశాస్త్రాన్ని సవాల్ చేసిన బైబిల్", "url": "bbth/s3/lesson19.html" },
      { "id": 20, "title": "మంత్రాలు, దయ్యాలు, క్షుద్రశక్తులు, చేతబడులు ఉన్నాయా?", "url": "bbth/s3/lesson20.html" },
      { "id": 21, "title": "దైవోగ్రతకు పాత్రులెవరు?", "url": "bbth/s3/lesson21.html" },
      { "id": 22, "title": "ఒకని పాపములు క్షమించే అధికారము ఇప్పుడెవరికుంది?", "url": "bbth/s3/lesson22.html" },
      { "id": 23, "title": "మత్సరము ఎముకలకు కుళ్ళా? అసూయ ఆరోగ్యానికి హానికరమా?", "url": "bbth/s3/lesson23.html" },
      { "id": 24, "title": "మేఘసందేశం మనిషి సందేహం", "url": "bbth/s3/lesson24.html" },
      { "id": 25, "title": "సంఘసంస్కర్తలకు స్ఫూర్తినిచ్చే బైబిల్", "url": "bbth/s3/lesson25.html" },
      { "id": 26, "title": "భూపతులకు అధిపతి ఎవరు?", "url": "bbth/s3/lesson26.html" },
      { "id": 27, "title": "నూతన నిబంధన క్రైస్తవ్యం", "url": "bbth/s3/lesson27.html" },
      { "id": 28, "title": "సంఘ పెద్దలనగా ఎవరు? అందరూ సంఘపెద్దలా?", "url": "bbth/s3/lesson28.html" },
      { "id": 29, "title": "అపవాది ఆయుష్షు", "url": "bbth/s3/lesson29.html" },
      { "id": 30, "title": "పునాదులు గల పట్టణమేది?", "url": "bbth/s3/lesson30.html" }
    ],

    "Semester 4": [
      { "id": 1, "title": "దేవుడు ప్రేమామయుడా?", "url": "bbth/s4/lesson01.html" },
      { "id": 2, "title": "అవసరాలకేనా దేవుడు?", "url": "bbth/s4/lesson02.html" },
      { "id": 3, "title": "త్రిత్వమా? ఏకత్వమా?", "url": "bbth/s4/lesson03.html" },
      { "id": 4, "title": "యేసురాజ్యం ఎక్కడ?", "url": "bbth/s4/lesson04.html" },
      { "id": 5, "title": "బాప్తిస్మం తండ్రి, కుమార, పరిశుద్ధాత్మ నామములోనా? యేసు నామములోనా?", "url": "bbth/s4/lesson05.html" },
      { "id": 6, "title": "దేవుని పిల్లలపై దేవదూతల భద్రతా వ్యవస్థ", "url": "bbth/s4/lesson06.html" },
      { "id": 7, "title": "క్రీస్తును ధరించిన ప్రకృతి", "url": "bbth/s4/lesson07.html" },
      { "id": 8, "title": "జన్మ నక్షత్రం", "url": "bbth/s4/lesson08.html" },
      { "id": 9, "title": "మనిషికి పోవలసినది పాపమా? రోగమా?", "url": "bbth/s4/lesson09.html" },
      { "id": 10, "title": "క్రైస్తవులకు విశ్రాంతి దినము - ఆదివారమా?", "url": "bbth/s4/lesson10.html" },
      { "id": 11, "title": "మీ మరణ శాసనాన్ని మార్చుకొనగలరా?", "url": "bbth/s4/lesson11.html" },
      { "id": 12, "title": "ఆత్మాహుతులా? ఆత్మ రక్షకులా?", "url": "bbth/s4/lesson12.html" },
      { "id": 13, "title": "నేటికి హిస్టరీ చెప్పని మృత్యువు వెనుక మిస్టరి", "url": "bbth/s4/lesson13.html" },
      { "id": 14, "title": "ఒకనాటి పుణ్యక్షేత్రాలు నేటి పవిత్రస్థలాలా?", "url": "bbth/s4/lesson14.html" },
      { "id": 15, "title": "శాస్త్రమెరుగని సత్యాలు", "url": "bbth/s4/lesson15.html" },
      { "id": 16, "title": "ఛాలెంజింగ్ స్వస్థతా సభలని పెట్టరెందుకు?", "url": "bbth/s4/lesson16.html" },
      { "id": 17, "title": "డావిన్సీ కోడ్పై జయశాలి సింహగర్జన", "url": "bbth/s4/lesson17.html" },
      { "id": 18, "title": "హార్మెగిద్దాను యుద్ధరహస్యం", "url": "bbth/s4/lesson18.html" },
      { "id": 19, "title": "విశ్వవినాశనపు ఆయుధమేది?", "url": "bbth/s4/lesson19.html" },
      { "id": 20, "title": "వెయ్యేండ్ల పరిపాలన", "url": "bbth/s4/lesson20.html" },
      { "id": 21, "title": "బైబిల్ పాటించిన భూలోకవీరులు", "url": "bbth/s4/lesson21.html" },
      { "id": 22, "title": "కనిన గర్భం ధన్యమా? కనని గర్భం ధన్యమా?", "url": "bbth/s4/lesson22.html" },
      { "id": 23, "title": "యేసుక్రీస్తు వచ్చింది ఇశ్రాయేలీయులకొరకా? అందరికొరకా?", "url": "bbth/s4/lesson23.html" },
      { "id": 24, "title": "దేవుని శక్తి స్వరూపాలు", "url": "bbth/s4/lesson24.html" },
      { "id": 25, "title": "దైవత్వం ముసుగులో మతోన్మాదం", "url": "bbth/s4/lesson25.html" },
      { "id": 26, "title": "బైబిల్లో స్త్రీలపై వివక్ష ఉన్నదా?", "url": "bbth/s4/lesson26.html" },
      { "id": 27, "title": "కలల ప్రపంచపు రహస్యాలు", "url": "bbth/s4/lesson27.html" }
    ]
  },

  "M.B.Th": {
    "Semester 1": [
      { "title": "1. పరమ వైద్యుడు", "url": "mbth/s1/lesson01.html" },
      { "title": "2. దేవుడా నీ రూపంగా మారగలనా?", "url": "mbth/s1/lesson02.html" },
      { "title": "3. భూమిపై విశ్వాసులున్నారా?", "url": "mbth/s1/lesson03.html" },
      { "title": "4. ఇద్దరు - సాక్ష్యులు", "url": "mbth/s1/lesson04.html" },
      { "title": "5. వశీకరణం", "url": "mbth/s1/lesson05.html" },
      { "title": "6. యూనివర్శల్ స్క్రీన్పై దేవుని కుమారుల మట్టిపాత్ర", "url": "mbth/s1/lesson06.html" },
      { "title": "7. హ్యూమన్ జీనోమ్ ప్రాజెక్ట్", "url": "mbth/s1/lesson07.html" },
      { "title": "8. నీవు లోకార్పణకా? ప్రాణార్పణకా?", "url": "mbth/s1/lesson08.html" },
      { "title": "9. క్రీస్తు సిలువ వేయబడ్డాడా?", "url": "mbth/s1/lesson09.html" },
      { "title": "10. అంత్యక్రీస్తు వచ్చాడా? అంత్య తీర్పు జరుగుతుందా?", "url": "mbth/s1/lesson10.html" },
      { "title": "11. క్రీస్తు విప్లవకారుడా?", "url": "mbth/s1/lesson11.html" },
      { "title": "12. సూర్యుని ధరించిన స్త్రీ", "url": "mbth/s1/lesson12.html" },
      { "title": "13. నాలుగు జీవుల సారాంశం", "url": "mbth/s1/lesson13.html" },
      { "title": "14. పరిశుద్ధాత్మ ముసుగులో భ్రష్టాత్మ (మొదటిభాగం)", "url": "mbth/s1/lesson14.html" },
      { "title": "15. పరిశుద్ధాత్మ ముసుగులో భ్రష్టాత్మ (రెండవభాగం)", "url": "mbth/s1/lesson15.html" },
      { "title": "16. 666", "url": "mbth/s1/lesson16.html" },
      { "title": "17. స్త్రీ సంఘములో వాక్యమును బోధించవచ్చునా?", "url": "mbth/s1/lesson17.html" },
      { "title": "18. ఉరితీతను బైబిల్ సమర్ధిస్తుందా?", "url": "mbth/s1/lesson18.html" },
      { "title": "19. క్రైస్తవులు శాస్త్రవేత్తలను హింసించారా?", "url": "mbth/s1/lesson19.html" },
      { "title": "20. ఎముకలో దాగిఉన్న జీవం - బైబిల్ చెప్పిన నిజం", "url": "mbth/s1/lesson20.html" },
      { "title": "21. మాదక ద్రవ్యాలు దేవుని సృష్ట్యా?", "url": "mbth/s1/lesson21.html" },
      { "title": "22. బైబిల్లో అశ్లీలత ఉన్నదా?", "url": "mbth/s1/lesson22.html" },
      { "title": "23. చరిత్రకు పట్టిన చెదలు చెదరగొట్టిన బైబిల్", "url": "mbth/s1/lesson23.html" },
      { "title": "24. అరిషడ్వర్గాలకు అద్వితీయదేవుడు బంధీయేనా?", "url": "mbth/s1/lesson24.html" },
      { "title": "25. ప్రపంచానికి తెలియని ఉత్తరదృవ ప్రకాశం", "url": "mbth/s1/lesson25.html" },
      { "title": "26. భారత ప్రగతికి బాటలు చూపే బైబిల్", "url": "mbth/s1/lesson26.html" },
      { "title": "27. ప్రపంచమంతా పితృస్వామ్య వ్యవస్థ ఉండుటకు బైబిల్ చెప్పిన భాష్యం", "url": "mbth/s1/lesson27.html" }
    ],

    "Semester 2": [
      { "title": "1. తండ్రియైన దేవుని అసలు పేరు ఏమిటి?", "url": "mbth/s2/lesson01.html" },
      { "title": "2. ఏది నిజమైన దైవారాధన", "url": "mbth/s2/lesson02.html" },
      { "title": "3. యెహోవా కట్టిన ఇల్లు", "url": "mbth/s2/lesson03.html" },
      { "title": "4. దేవుని అంబులపొది", "url": "mbth/s2/lesson04.html" },
      { "title": "5. భూమిని తలక్రిందులు చేయువారు ఎవరు?", "url": "mbth/s2/lesson05.html" },
      { "title": "6. ఏది నిజమైన విశ్వవిజ్ఞానం.", "url": "mbth/s2/lesson06.html" },
      { "title": "7. ఆ ప్రవక్త ఎవరు?", "url": "mbth/s2/lesson07.html" },
      { "title": "8. మెల్కీసెదెకు ఎవరు?", "url": "mbth/s2/lesson08.html" },
      { "title": "9. కాలము నెరిగి నిద్రమేలుకో!", "url": "mbth/s2/lesson09.html" },
      { "title": "10. అబద్ద బోధకులు సాతాను గూఢచారులా?", "url": "mbth/s2/lesson10.html" },
      { "title": "11. ప్రభువు బల్లకు పరమార్ధము ఏమిటి?", "url": "mbth/s2/lesson11.html" },
      { "title": "12. ఉప్పుచేప.", "url": "mbth/s2/lesson12.html" },
      { "title": "13. క్రీస్తు ఇండియాకు రాలేదు.", "url": "mbth/s2/lesson13.html" },
      { "title": "14. సత్యాన్ని సమాధి చేసిన సమాధుల పండుగ.", "url": "mbth/s2/lesson14.html" },
      { "title": "15. నిరుద్యోగులకు శుభవార్త.", "url": "mbth/s2/lesson15.html" },
      { "title": "16. గ్రహాంతర జీవులా? గందరగోళం మనుష్యులా?", "url": "mbth/s2/lesson16.html" },
      { "title": "17. ఆహ్వానింపబడని లోకానికి ఆహుతులైన ఆత్మలెవరు?", "url": "mbth/s2/lesson17.html" },
      { "title": "18. నరహంతకునికి ఉరిశిక్ష? దేవాంతకునికి ఏ శిక్ష?", "url": "mbth/s2/lesson18.html" },
      { "title": "19. డైనోసార్స్", "url": "mbth/s2/lesson19.html" },
      { "title": "20. బైబిల్లోని బాగ్ధాద్ బ్రతుకు పుస్తకం.", "url": "mbth/s2/lesson20.html" },
      { "title": "21. భూమిమీద సర్వాధికారంగల దేవుని సంఘము.", "url": "mbth/s2/lesson21.html" },
      { "title": "22. వికలాంగుల సృష్టి దేవునిదా?", "url": "mbth/s2/lesson22.html" },
      { "title": "23. పురావస్తు శాస్త్రమెరుగని చిత్రలిపి", "url": "mbth/s2/lesson23.html" },
      { "title": "24. ప్రకటన గ్రంథములోని 7 సంఘములు - మొదటి భాగం", "url": "mbth/s2/lesson24.html" },
      { "title": "25. ప్రకటన గ్రంథములోని 7 సంఘములు - రెండవ భాగం", "url": "mbth/s2/lesson25.html" },
      { "title": "26. సంగీత పుట్టుక రహస్యం", "url": "mbth/s2/lesson26.html" },
      { "title": "27. 1,44,000 మంది మాత్రమే పరలోకం వెళతారా?", "url": "mbth/s2/lesson27.html" },
      { "title": "28. గోగుమాగోగు ఎవరు?", "url": "mbth/s2/lesson28.html" },
      { "title": "29. యెరూషలేము దేవాలయము తిరిగి కట్టబడుతుందా? యూదులు తిరిగి వస్తారా?", "url": "mbth/s2/lesson29.html" },
      { "title": "30. బైబిల్ దేవుడు విగ్రహాలను ఎందుకు పగులగొట్టమన్నాడు?", "url": "mbth/s2/lesson30.html" }
    ]
  }
};


// =============== 2) UTILITIES ===============
const $ = sel => document.querySelector(sel);
const grid = $("#grid");
const q = $("#q");
const courseSel = $("#courseSel");
const semesterSel = $("#semesterSel");
const countEl = $("#count");
const favToggle = $("#favToggle");
const clearBtn = $("#clearBtn");

const FAV_KEY = "bible-course-favs";
const favs = new Set(JSON.parse(localStorage.getItem(FAV_KEY) || "[]"));
function saveFavs(){ localStorage.setItem(FAV_KEY, JSON.stringify([...favs])); }

function lessonId(course, sem, idx){ return `${course}__${sem}__${idx}`; }
function withBase(url){
  if(!url) return "#";
  try { const u = new URL(url); return u.href; }
  catch { return SITE_BASE ? SITE_BASE.replace(/\/$/, "")+"/"+url.replace(/^\//, "") : url; }
}
function debounce(fn,ms){ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; }

// =============== 3) FILTERS & POPOVERS ===============
function initFilters(){
  // Fill courses
  Object.keys(DATA).forEach(c=>{
    const opt=document.createElement('option'); opt.value=c; opt.textContent=c; courseSel.appendChild(opt);
  });

  courseSel.addEventListener('change', ()=>{ syncSemesters(); render(); syncURL(); });
  semesterSel.addEventListener('change', ()=>{ render(); syncURL(); });
  favToggle.addEventListener('click', ()=>{ favToggle.classList.toggle('active'); render(); });
  q.addEventListener('input', debounce(()=>{ render(); syncURL(); }, 120));
  clearBtn.addEventListener('click', ()=>{ q.value=''; render(); syncURL(); q.focus(); });

  // keyboard shortcuts
  window.addEventListener('keydown', (e)=>{
    if(e.key === '/' && document.activeElement !== q){ e.preventDefault(); q.focus(); }
    if(e.key === 'e' || e.key === 'E'){ expandAll(); }
    if(e.key === 'c' || e.key === 'C'){ collapseAll(); }
  });

  // URL → state
  const url = new URL(location.href);
  const sCourse = url.searchParams.get('course') || "";
  const sSem = url.searchParams.get('sem') || "";
  const sQ = url.searchParams.get('q') || "";
  if(sCourse && DATA[sCourse]) courseSel.value = sCourse;
  syncSemesters();
  if(sSem) semesterSel.value = sSem;
  if(sQ) q.value = sQ;

// Popovers open/close logic
const coursePopover = document.getElementById('coursePopover');
const semPopover = document.getElementById('semPopover');
document.getElementById('courseBtn').addEventListener('click', (e)=>{ 
  e.stopPropagation(); 
  coursePopover.classList.toggle('open'); 
  semPopover.classList.remove('open'); 
});
document.getElementById('semesterBtn').addEventListener('click', (e)=>{ 
  e.stopPropagation(); 
  semPopover.classList.toggle('open'); 
  coursePopover.classList.remove('open'); 
});

// ✅ FIX: Only close when clicked completely outside
document.addEventListener('click', (e)=>{ 
  if(!coursePopover.contains(e.target)) coursePopover.classList.remove('open'); 
  if(!semPopover.contains(e.target)) semPopover.classList.remove('open'); 
});

}

function syncSemesters(){
  const course = courseSel.value;
  semesterSel.innerHTML = '<option value="">All Semesters</option>';
  if(!course){
    const set = new Set();
    Object.values(DATA).forEach(o=>Object.keys(o).forEach(s=>set.add(s)));
    [...set].sort().forEach(s=>{
      const opt=document.createElement('option'); opt.value=s; opt.textContent=s; semesterSel.appendChild(opt);
    });
    return;
  }
  Object.keys(DATA[course]||{}).forEach(s=>{
    const opt=document.createElement('option'); opt.value=s; opt.textContent=s; semesterSel.appendChild(opt);
  });
}

function syncURL(){
  const url = new URL(location.href);
  q.value ? url.searchParams.set('q', q.value) : url.searchParams.delete('q');
  courseSel.value ? url.searchParams.set('course', courseSel.value) : url.searchParams.delete('course');
  semesterSel.value ? url.searchParams.set('sem', semesterSel.value) : url.searchParams.delete('sem');
  history.replaceState({}, '', url);
}

// =============== 4) RENDER ===============
function render(){
  grid.innerHTML = '';
  const query = q.value.trim().toLowerCase();
  const courseFilter = courseSel.value;
  const semFilter = semesterSel.value;
  const onlyFav = favToggle.classList.contains('active');
  let total = 0;

  // ✅ ఫిల్టర్ లు ఎప్పుడూ sync అవ్వాలి
  

  const courses = courseFilter ? { [courseFilter]: DATA[courseFilter] } : DATA;

  Object.entries(courses).forEach(([course, sems])=>{
    const courseEl = document.createElement('details');
    courseEl.className = 'course';

    // 🚩 Default గా courses collapsed (open = false)
    courseEl.open = false;

    const cSummary = document.createElement('summary');
    cSummary.innerHTML = `<span class="title">${course}</span><span class="muted"><span class="chev">▶</span></span>`;
    courseEl.appendChild(cSummary);

    Object.entries(sems).forEach(([semName, lessons])=>{
      if(semFilter && semFilter !== semName) return;

      const filtered = lessons
        .map((lsn, idx)=> ({...lsn, _id: lessonId(course, semName, idx)}))
        .filter(lsn=>{
          const favOK = !onlyFav || favs.has(lsn._id);
          const qOK = !query || (lsn.title.toLowerCase().includes(query) || `${course} ${semName}`.toLowerCase().includes(query));
          return favOK && qOK;
        });

      if(filtered.length === 0) return;

      const semEl = document.createElement('details');
      semEl.className = 'sem';

      // 🚩 Default గా semesters కూడా collapsed
      semEl.open = false;

      const sSummary = document.createElement('summary');
      sSummary.innerHTML = `<span class="title">${semName}</span><span class="muted">${filtered.length} పాఠాలు <span class="chev">▶</span></span>`;
      semEl.appendChild(sSummary);

      const list = document.createElement('div'); list.className = 'lessons';
      filtered.forEach((lsn)=>{
        total++;
        const item = document.createElement('div'); item.className = 'lesson';
        const left = document.createElement('div');
        const url = withBase(lsn.url);
        left.innerHTML = `<a href="${url}" target="_blank" rel="noopener">${lsn.title}</a><div class="muted">${course} • ${semName}</div>`;

        const right = document.createElement('div'); right.className = 'right';
        

        const openBtn = document.createElement('button'); openBtn.className='open-btn'; openBtn.textContent='Open';
        openBtn.addEventListener('click', ()=> window.open(url, '_blank'));

        const favBtn = document.createElement('button'); favBtn.className='fav-btn'; favBtn.title='Toggle Favorite'; favBtn.textContent='★';
        if(favs.has(lsn._id)) favBtn.classList.add('active');
        favBtn.addEventListener('click', ()=>{
          if(favs.has(lsn._id)) { favs.delete(lsn._id); favBtn.classList.remove('active'); }
          else { favs.add(lsn._id); favBtn.classList.add('active'); }
          saveFavs();
        });

         right.appendChild(openBtn); right.appendChild(favBtn);
        item.appendChild(left); item.appendChild(right); list.appendChild(item);
      });

      semEl.appendChild(list); courseEl.appendChild(semEl);
    });

    if(courseEl.querySelector('.lessons')) grid.appendChild(courseEl);
  });

  countEl.textContent = `${total} పాఠాలు`;
}

// =============== 5) CONTROLS ===============
function expandAll(){ document.querySelectorAll('details.course, details.sem').forEach(d=> d.open = true); }
function collapseAll(){
  document.querySelectorAll('details.course, details.sem').forEach(d=> d.open = false);
}

$('#expandAll').addEventListener('click', expandAll);
$('#collapseAll').addEventListener('click', collapseAll);

// =============== 6) INIT ===============
(function init(){ initFilters(); render(); })();

</script>

</body>
</html>
